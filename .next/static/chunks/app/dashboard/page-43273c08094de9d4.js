(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[702],{7072:function(e,s,t){Promise.resolve().then(t.bind(t,1788))},1788:function(e,s,t){"use strict";t.r(s),t.d(s,{default:function(){return S}});var a=t(7437),l=t(2265),r=t(6463),i=t(7138),n=t(9896),d=t(7424),c=t(5733),o=t(1240),x=t(4086),m=t(2513),h=t(9333),u=t(4241),g=t(2810),p=t(3787),b=t(883),j=t(656),y=t(4697),f=t(2468),N=t(6884),v=t(7164),w=t(1510);function k(e){let{isOpen:s,onClose:t,url:r,title:i}=e,[n,d]=(0,l.useState)(!1),[c,o]=(0,l.useState)(Date.now()),[x,m]=(0,l.useState)(!1);if(!s)return null;let h=async()=>{try{await navigator.clipboard.writeText(r),d(!0),setTimeout(()=>d(!1),2e3)}catch(e){console.error("Failed to copy:",e)}};return(0,a.jsx)("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:(0,a.jsxs)("div",{className:"bg-white rounded-2xl p-6 max-w-md w-full",children:[(0,a.jsxs)("div",{className:"flex justify-between items-start mb-6",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h3",{className:"text-xl font-bold text-gray-900",children:"Share Your Talk Page"}),(0,a.jsx)("p",{className:"text-sm text-gray-600 mt-1",children:"QR code and link for easy sharing"})]}),(0,a.jsx)("button",{onClick:t,className:"p-1 hover:bg-gray-100 rounded-lg transition-colors",children:(0,a.jsx)(y.Z,{className:"h-5 w-5 text-gray-500"})})]}),(0,a.jsxs)("div",{className:"bg-gradient-to-br from-primary-50 to-primary-100 rounded-xl p-8 mb-6 relative",children:[x&&(0,a.jsx)("div",{className:"absolute inset-0 bg-white/80 rounded-xl flex items-center justify-center z-10",children:(0,a.jsxs)("div",{className:"flex flex-col items-center gap-2",children:[(0,a.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary-600"}),(0,a.jsx)("span",{className:"text-sm text-gray-600",children:"Regenerating..."})]})}),(0,a.jsx)("div",{id:"qr-code-container",className:"bg-white rounded-lg p-4 inline-block mx-auto",children:(0,a.jsx)(j.ZP,{value:"".concat(r,"?qr=").concat(c),size:200,level:"H",bgColor:"#ffffff",fgColor:"#000000"},c)}),(0,a.jsx)("p",{className:"text-center text-xs text-primary-700 mt-3 font-medium",children:i})]}),(0,a.jsxs)("div",{className:"space-y-3",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2 p-3 bg-gray-50 rounded-lg",children:[(0,a.jsx)("input",{type:"text",value:r,readOnly:!0,className:"flex-1 bg-transparent text-sm text-gray-700 outline-none"}),(0,a.jsx)("button",{onClick:h,className:"p-2 hover:bg-gray-200 rounded-lg transition-colors",title:"Copy link",children:n?(0,a.jsx)(f.Z,{className:"h-4 w-4 text-green-600"}):(0,a.jsx)(N.Z,{className:"h-4 w-4 text-gray-600"})})]}),(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-3",children:[(0,a.jsxs)("button",{onClick:()=>{let e=document.querySelector("#qr-code-container svg");if(!e)return;let s=new XMLSerializer().serializeToString(e),t=document.createElement("canvas"),a=t.getContext("2d"),l=new Image;t.width=250,t.height=250,l.onload=()=>{null==a||a.drawImage(l,0,0,250,250),t.toBlob(e=>{if(!e)return;let s=URL.createObjectURL(e),t=document.createElement("a");t.href=s,t.download="".concat(i.replace(/[^a-z0-9]/gi,"-").toLowerCase(),"-qr-code.png"),t.click(),URL.revokeObjectURL(s)})},l.src="data:image/svg+xml;base64,"+btoa(unescape(encodeURIComponent(s)))},className:"flex items-center justify-center gap-2 px-4 py-2 bg-primary-600 text-white rounded-lg hover:bg-primary-700 transition-colors",children:[(0,a.jsx)(v.Z,{className:"h-4 w-4"}),"Download QR"]}),(0,a.jsxs)("button",{onClick:()=>{navigator.share?navigator.share({title:i,text:"Check out my talk page: ".concat(i),url:r}):h()},className:"flex items-center justify-center gap-2 px-4 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors",children:[(0,a.jsx)(w.Z,{className:"h-4 w-4"}),"Share"]})]})]}),(0,a.jsx)("div",{className:"mt-6 pt-6 border-t border-gray-200",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsx)("p",{className:"text-xs text-gray-500",children:"Display at the end of your presentation"}),(0,a.jsx)("button",{onClick:()=>{m(!0),setTimeout(()=>{o(Date.now()),m(!1)},500)},disabled:x,className:"text-xs text-primary-600 hover:text-primary-700 underline disabled:opacity-50",children:"Regenerate QR"})]})})]})})}let C={url:t(357).env.NEXT_PUBLIC_SITE_URL||"https://speakaboutai.us",name:"MicDrop",description:"Speaker Landing Pages by Speak About AI"};function S(){let e=(0,r.useRouter)(),[s,t]=(0,l.useState)(null),[j,y]=(0,l.useState)([]),[f,N]=(0,l.useState)(!0),[v,w]=(0,l.useState)(!1),[S,Z]=(0,l.useState)(null),[P,T]=(0,l.useState)(!1),[D,L]=(0,l.useState)(!1),[R,A]=(0,l.useState)(null),[E,I]=(0,l.useState)(null);(0,l.useEffect)(()=>{let s=localStorage.getItem("user");if(!s){e.push("/login");return}t(JSON.parse(s)),_()},[e]);let _=async()=>{try{let e=await fetch("/api/talk-pages");if(e.ok){let s=(await e.json()).map(e=>{var s,t;return{id:e.id,title:e.title,slug:e.slug,date:e.date,views:(null===(s=e._count)||void 0===s?void 0:s.analytics)||0,leads:(null===(t=e._count)||void 0===t?void 0:t.emailCaptures)||0,published:e.published}});y(s)}}catch(e){console.error("Error fetching talk pages:",e)}finally{N(!1)}},U=e=>{Z(e),w(!0)},O=async()=>{if(S){T(!0);try{(await fetch("/api/talk-pages/".concat(S.id),{method:"DELETE"})).ok?(y(j.filter(e=>e.id!==S.id)),w(!1),Z(null)):alert("Failed to delete the page. Please try again.")}catch(e){console.error("Error deleting page:",e),alert("An error occurred while deleting the page.")}finally{T(!1)}}},z=async e=>{I(e.id);try{(await fetch("/api/talk-pages/".concat(e.id,"/publish"),{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify({published:!e.published})})).ok?y(j.map(s=>s.id===e.id?{...s,published:!s.published}:s)):alert("Failed to update publish status. Please try again.")}catch(e){console.error("Error toggling publish status:",e),alert("An error occurred while updating the publish status.")}finally{I(null)}};if(f)return(0,a.jsx)("div",{className:"min-h-screen flex items-center justify-center",children:(0,a.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary-600"})});let Q=j.reduce((e,s)=>e+s.views,0),q=j.reduce((e,s)=>e+s.leads,0),F=j.filter(e=>e.published).length;return(0,a.jsxs)("div",{className:"min-h-screen bg-gray-50",children:[(0,a.jsx)("header",{className:"bg-white border-b",children:(0,a.jsx)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:(0,a.jsxs)("div",{className:"flex justify-between items-center h-16",children:[(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)("img",{src:"/favicon.png",alt:"Speak About AI",className:"h-10 w-10"}),(0,a.jsxs)("div",{className:"ml-3",children:[(0,a.jsx)("span",{className:"text-xl font-bold bg-speakabout-gradient bg-clip-text text-transparent",children:"MicDrop"}),(0,a.jsx)("span",{className:"block text-xs text-gray-600 -mt-1",children:"by Speak About AI"})]})]}),(0,a.jsxs)("div",{className:"flex items-center gap-4",children:[(0,a.jsxs)("span",{className:"text-sm text-gray-600",children:["Welcome, ",null==s?void 0:s.name]}),(0,a.jsxs)("button",{onClick:()=>{localStorage.removeItem("user"),document.cookie="userId=; expires=Thu, 01 Jan 1970 00:00:00 UTC; path=/;",e.push("/")},className:"flex items-center gap-2 px-3 py-1.5 text-sm text-gray-600 hover:text-gray-900",children:[(0,a.jsx)(n.Z,{className:"h-4 w-4"}),"Logout"]})]})]})})}),(0,a.jsxs)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6 mb-8",children:[(0,a.jsx)("div",{className:"bg-white rounded-lg p-6 shadow-sm",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-sm text-gray-600",children:"Total Pages"}),(0,a.jsx)("p",{className:"text-2xl font-bold",children:j.length})]}),(0,a.jsx)(d.Z,{className:"h-8 w-8 text-primary-600 opacity-50"})]})}),(0,a.jsx)("div",{className:"bg-white rounded-lg p-6 shadow-sm",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-sm text-gray-600",children:"Published"}),(0,a.jsx)("p",{className:"text-2xl font-bold",children:F})]}),(0,a.jsx)(c.Z,{className:"h-8 w-8 text-green-600 opacity-50"})]})}),(0,a.jsx)("div",{className:"bg-white rounded-lg p-6 shadow-sm",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-sm text-gray-600",children:"Total Views"}),(0,a.jsx)("p",{className:"text-2xl font-bold",children:Q})]}),(0,a.jsx)(o.Z,{className:"h-8 w-8 text-blue-600 opacity-50"})]})}),(0,a.jsx)("div",{className:"bg-white rounded-lg p-6 shadow-sm",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-sm text-gray-600",children:"Leads Captured"}),(0,a.jsx)("p",{className:"text-2xl font-bold",children:q})]}),(0,a.jsx)(x.Z,{className:"h-8 w-8 text-purple-600 opacity-50"})]})})]}),(0,a.jsxs)("div",{className:"flex justify-between items-center mb-6",children:[(0,a.jsx)("h1",{className:"text-2xl font-bold text-gray-900",children:"Your Talk Pages"}),(0,a.jsxs)(i.default,{href:"/dashboard/create",className:"inline-flex items-center px-4 py-2 bg-primary-600 text-white rounded-lg hover:bg-primary-700",children:[(0,a.jsx)(m.Z,{className:"h-5 w-5 mr-2"}),"Create New Page"]})]}),(0,a.jsx)("div",{className:"bg-white rounded-lg shadow-sm overflow-hidden",children:0===j.length?(0,a.jsxs)("div",{className:"p-12 text-center",children:[(0,a.jsx)(h.Z,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),(0,a.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No talk pages yet"}),(0,a.jsx)("p",{className:"text-gray-600 mb-6",children:"Create your first speaker landing page to get started"}),(0,a.jsxs)(i.default,{href:"/dashboard/create",className:"inline-flex items-center px-4 py-2 bg-primary-600 text-white rounded-lg hover:bg-primary-700",children:[(0,a.jsx)(m.Z,{className:"h-5 w-5 mr-2"}),"Create Your First Page"]})]}):(0,a.jsx)("div",{className:"divide-y divide-gray-200",children:j.map(e=>(0,a.jsx)("div",{className:"p-6 hover:bg-gray-50",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{className:"flex-1",children:[(0,a.jsxs)("div",{className:"flex items-center gap-3 mb-2",children:[(0,a.jsx)("h3",{className:"text-lg font-semibold text-gray-900",children:e.title}),e.published?(0,a.jsx)("span",{className:"px-2 py-1 text-xs font-medium text-green-700 bg-green-100 rounded-full",children:"Published"}):(0,a.jsx)("span",{className:"px-2 py-1 text-xs font-medium text-yellow-700 bg-yellow-100 rounded-full",children:"Draft"})]}),(0,a.jsxs)("div",{className:"flex items-center gap-4 text-sm text-gray-600",children:[(0,a.jsxs)("div",{className:"flex items-center gap-1",children:[(0,a.jsx)(u.Z,{className:"h-4 w-4"}),new Date(e.date).toLocaleDateString()]}),(0,a.jsxs)("div",{className:"flex items-center gap-1",children:[(0,a.jsx)(c.Z,{className:"h-4 w-4"}),e.views," views"]}),(0,a.jsxs)("div",{className:"flex items-center gap-1",children:[(0,a.jsx)(x.Z,{className:"h-4 w-4"}),e.leads," leads"]})]})]}),(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsxs)("button",{onClick:()=>z(e),disabled:E===e.id,className:"px-3 py-1.5 text-sm rounded-lg flex items-center gap-1 transition-colors ".concat(e.published?"text-yellow-700 border border-yellow-600 hover:bg-yellow-50":"text-green-700 border border-green-600 hover:bg-green-50"," ").concat(E===e.id?"opacity-50 cursor-not-allowed":""),title:e.published?"Unpublish page":"Publish page",children:[E===e.id?(0,a.jsx)("span",{className:"animate-spin h-3 w-3 border-2 border-current border-t-transparent rounded-full"}):(0,a.jsx)(c.Z,{className:"h-3 w-3"}),e.published?"Unpublish":"Publish"]}),e.published&&(0,a.jsxs)("button",{onClick:()=>{A(e),L(!0)},className:"px-3 py-1.5 text-sm text-gray-700 hover:text-gray-900 border rounded-lg hover:bg-gray-50 flex items-center gap-1",title:"Show QR Code",children:[(0,a.jsx)(g.Z,{className:"h-3 w-3"}),"QR Code"]}),(0,a.jsxs)(i.default,{href:"/talk/".concat(e.slug),target:"_blank",className:"px-3 py-1.5 text-sm text-primary-600 hover:text-primary-700 border border-primary-600 rounded-lg hover:bg-primary-50 flex items-center gap-1",children:[(0,a.jsx)(c.Z,{className:"h-3 w-3"}),"Preview"]}),e.published&&(0,a.jsxs)(i.default,{href:"/talk/".concat(e.slug),target:"_blank",className:"px-3 py-1.5 text-sm text-white bg-green-600 hover:bg-green-700 rounded-lg flex items-center gap-1",children:[(0,a.jsx)(p.Z,{className:"h-3 w-3"}),"View Live"]}),(0,a.jsxs)(i.default,{href:"/dashboard/analytics/".concat(e.id),className:"px-3 py-1.5 text-sm text-gray-700 hover:text-gray-900 border rounded-lg hover:bg-gray-50 flex items-center gap-1",children:[(0,a.jsx)(d.Z,{className:"h-3 w-3"}),"Analytics"]}),(0,a.jsx)(i.default,{href:"/dashboard/edit/".concat(e.id),className:"px-3 py-1.5 text-sm text-gray-700 hover:text-gray-900 border rounded-lg hover:bg-gray-50",children:"Edit"}),(0,a.jsxs)("button",{onClick:()=>U(e),className:"px-3 py-1.5 text-sm text-red-600 hover:text-red-700 border border-red-600 rounded-lg hover:bg-red-50 flex items-center gap-1",children:[(0,a.jsx)(b.Z,{className:"h-3 w-3"}),"Delete"]})]})]})},e.id))})}),(0,a.jsxs)("div",{className:"mt-8 bg-blue-50 border border-blue-200 rounded-lg p-6",children:[(0,a.jsx)("h3",{className:"font-semibold text-blue-900 mb-2",children:"\uD83D\uDCA1 Pro Tips"}),(0,a.jsxs)("ul",{className:"text-sm text-blue-800 space-y-1",children:[(0,a.jsx)("li",{children:"• Add your GPT tools to provide immediate value to attendees"}),(0,a.jsx)("li",{children:"• Gate premium resources with email capture to build your list"}),(0,a.jsx)("li",{children:"• Include your LinkedIn and business links to drive connections"}),(0,a.jsx)("li",{children:"• Share your page URL and QR code at the end of your presentation"})]})]})]}),v&&(0,a.jsx)("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:(0,a.jsxs)("div",{className:"bg-white rounded-lg p-6 max-w-md w-full",children:[(0,a.jsxs)("div",{className:"flex items-center gap-3 mb-4",children:[(0,a.jsx)("div",{className:"bg-red-100 rounded-full p-2",children:(0,a.jsx)(b.Z,{className:"h-6 w-6 text-red-600"})}),(0,a.jsx)("h3",{className:"text-lg font-semibold",children:"Delete Talk Page"})]}),(0,a.jsxs)("p",{className:"text-gray-600 mb-6",children:["Are you sure you want to delete ",(0,a.jsxs)("strong",{children:['"',null==S?void 0:S.title,'"']}),"? This action cannot be undone and will permanently remove:"]}),(0,a.jsxs)("ul",{className:"list-disc list-inside text-sm text-gray-600 mb-6 space-y-1",children:[(0,a.jsx)("li",{children:"All page content and settings"}),(0,a.jsx)("li",{children:"Associated GPTs and resources"}),(0,a.jsx)("li",{children:"Analytics and email captures"}),(0,a.jsx)("li",{children:"The public page URL"})]}),(0,a.jsxs)("div",{className:"flex gap-3",children:[(0,a.jsx)("button",{onClick:()=>{w(!1),Z(null)},disabled:P,className:"flex-1 px-4 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 disabled:opacity-50",children:"Cancel"}),(0,a.jsx)("button",{onClick:O,disabled:P,className:"flex-1 px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 disabled:opacity-50",children:P?"Deleting...":"Delete Page"})]})]})}),D&&R&&(0,a.jsx)(k,{isOpen:D,onClose:()=>{L(!1),A(null)},url:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",s=e.startsWith("/")?e:"/".concat(e);return"".concat(C.url).concat(s)}("/talk/".concat(R.slug)),title:R.title})]})}}},function(e){e.O(0,[231,592,971,23,744],function(){return e(e.s=7072)}),_N_E=e.O()}]);