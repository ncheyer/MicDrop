"use strict";(()=>{var e={};e.id=357,e.ids=[357],e.modules={3524:e=>{e.exports=require("@prisma/client")},399:e=>{e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},517:e=>{e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},8562:(e,r,t)=>{t.r(r),t.d(r,{originalPathname:()=>g,patchFetch:()=>m,requestAsyncStorage:()=>l,routeModule:()=>c,serverHooks:()=>x,staticGenerationAsyncStorage:()=>h});var o={};t.r(o),t.d(o,{GET:()=>d,POST:()=>u});var a=t(9303),s=t(8716),n=t(670),i=t(7070),p=t(2331);async function u(e){try{let{doNotSell:r}=await e.json(),t=e.headers.get("x-forwarded-for"),o=e.headers.get("x-real-ip"),a=t?.split(",")[0]||o||"unknown";return await p._.ccpaOptOut.create({data:{ipAddress:a,doNotSell:r,timestamp:new Date,userAgent:e.headers.get("user-agent")||"unknown"}}),i.NextResponse.json({success:!0})}catch(e){return console.error("Error storing CCPA opt-out:",e),i.NextResponse.json({error:"Failed to store CCPA preference"},{status:500})}}async function d(e){try{let r=e.headers.get("x-forwarded-for"),t=e.headers.get("x-real-ip"),o=r?.split(",")[0]||t||"unknown",a=await p._.ccpaOptOut.findFirst({where:{ipAddress:o},orderBy:{timestamp:"desc"}});return i.NextResponse.json({doNotSell:a?.doNotSell||!1})}catch(e){return console.error("Error retrieving CCPA preference:",e),i.NextResponse.json({error:"Failed to retrieve CCPA preference"},{status:500})}}let c=new a.AppRouteRouteModule({definition:{kind:s.x.APP_ROUTE,page:"/api/privacy/do-not-sell/route",pathname:"/api/privacy/do-not-sell",filename:"route",bundlePath:"app/api/privacy/do-not-sell/route"},resolvedPagePath:"/Users/noahcheyer/MicDrop/app/api/privacy/do-not-sell/route.ts",nextConfigOutput:"",userland:o}),{requestAsyncStorage:l,staticGenerationAsyncStorage:h,serverHooks:x}=c,g="/api/privacy/do-not-sell/route";function m(){return(0,n.patchFetch)({serverHooks:x,staticGenerationAsyncStorage:h})}},2331:(e,r,t)=>{t.d(r,{_:()=>a});var o=t(3524);let a=globalThis.prisma||new o.PrismaClient}};var r=require("../../../../webpack-runtime.js");r.C(e);var t=e=>r(r.s=e),o=r.X(0,[948,972],()=>t(8562));module.exports=o})();