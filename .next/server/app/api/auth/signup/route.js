"use strict";(()=>{var e={};e.id=654,e.ids=[654],e.modules={3524:e=>{e.exports=require("@prisma/client")},399:e=>{e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},517:e=>{e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},3993:(e,r,t)=>{t.r(r),t.d(r,{originalPathname:()=>g,patchFetch:()=>w,requestAsyncStorage:()=>l,routeModule:()=>c,serverHooks:()=>h,staticGenerationAsyncStorage:()=>d});var a={};t.r(a),t.d(a,{POST:()=>p});var s=t(9303),n=t(8716),i=t(670),o=t(7070),u=t(6271);async function p(e){try{let{name:r,email:t,password:a}=await e.json(),s=await (0,u.r4)(r,t,a),n=o.NextResponse.json({user:s});return n.cookies.set("userId",s.id,{httpOnly:!0,secure:!0,sameSite:"lax",maxAge:604800}),n}catch(e){if("User already exists"===e.message)return o.NextResponse.json({error:"An account with this email already exists"},{status:400});return o.NextResponse.json({error:"Something went wrong"},{status:500})}}let c=new s.AppRouteRouteModule({definition:{kind:n.x.APP_ROUTE,page:"/api/auth/signup/route",pathname:"/api/auth/signup",filename:"route",bundlePath:"app/api/auth/signup/route"},resolvedPagePath:"/Users/noahcheyer/MicDrop/app/api/auth/signup/route.ts",nextConfigOutput:"",userland:a}),{requestAsyncStorage:l,staticGenerationAsyncStorage:d,serverHooks:h}=c,g="/api/auth/signup/route";function w(){return(0,i.patchFetch)({serverHooks:h,staticGenerationAsyncStorage:d})}},6271:(e,r,t)=>{t.d(r,{So:()=>o,r4:()=>u});let a=require("crypto");var s=t.n(a),n=t(9487);function i(e){return s().createHash("sha256").update(e).digest("hex")}async function o(e,r){try{let t=await n._.user.findUnique({where:{email:e}});if(!t)return null;let a=i(r);if(t.password!==a)return null;let{password:s,...o}=t;return o}catch(e){return console.error("Authentication error:",e),null}}async function u(e,r,t){try{if(await n._.user.findUnique({where:{email:r}}))throw Error("User already exists");let{password:a,...s}=await n._.user.create({data:{name:e,email:r,password:i(t)}});return s}catch(e){throw console.error("Create user error:",e),e}}},9487:(e,r,t)=>{t.d(r,{_:()=>s});var a=t(3524);t(2237);let s=global.prisma||new a.PrismaClient({log:["error"]})}};var r=require("../../../../webpack-runtime.js");r.C(e);var t=e=>r(r.s=e),a=r.X(0,[948,972,237],()=>t(3993));module.exports=a})();